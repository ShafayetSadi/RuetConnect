{% load static %} {% load humanize %}
<div class="card bg-base-200 border-base-300 border shadow-xl">
    <div class="card-body px-4 py-2">
        <!-- Post Header -->
        <div class="mb-2 flex items-center gap-2 text-sm">
            <a href="{% url 'thread-detail' thread_name=post.thread.slug %}" class="flex items-center gap-2">
                <img class="w-8 rounded-full" src="{% static 'images/thread.jpg' %}" />
                <div>r/{{ post.thread.title }}</div>
            </a>
            <span class="opacity-60">•</span>
            <a class="flex items-center gap-2" href="{% url 'user-detail' username=post.author.username %}">
                <img class="w-6 rounded-full" src="{% static 'images/thread.jpg' %}" />
                <div>u/{{ post.author.username }}</div>
            </a>
            <span class="opacity-60">•</span>
            <span class="text-base-content/60">{{ post.created_at | naturaltime }}</span>
            <span class="opacity-60">•</span>
            <span class="badge badge-sm badge-outline">
                {% if post.visibility == 'thread' %} Thread Only {% elif post.visibility == 'organization' %} Org
                Members {% else %} Public {% endif %}
            </span>
        </div>
        <!-- Post Title & Content -->
        <a href="{% url 'post-detail' slug=post.slug %}" class="block">
            <h2 class="mb-1 text-lg font-semibold">{{ post.title }}</h2>
            <div class="text-base-content/70 line-clamp-4 text-sm">{{ post.content }}</div>
        </a>
        <!-- Post Action Buttons -->
        <div class="mt-1 flex flex-wrap items-center gap-4 text-sm">
            <div>{% include 'campus/vote.html' %}</div>
            <a href="{% url 'post-detail' slug=post.slug %}" class="btn btn-sm btn-outline">
                <span>{{ post.comments.count }} comments</span>
            </a>
            {% if post.author == user %}
            <a href="{% url 'post-update' slug=post.slug %}" class="btn btn-sm btn-outline">
                <span>Update</span>
            </a>
            {% endif %}
            <button onclick="openShareModal({{ post.id }})" class="btn btn-sm btn-outline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
                <span>Share</span>
            </button>
        </div>
    </div>

    <!-- Include Share Modal -->
    {% include 'partials/share_modal.html' %}
</div>
