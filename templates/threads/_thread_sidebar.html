{% load static %}
<h3 class="card-title mb-4 text-lg">About r/{{ thread.title }}</h3>

{% if thread.description %}
<p class="text-base-content/70 mb-4 text-sm">{{ thread.description }}</p>
{% endif %}

<div class="divider"></div>

<!-- Stats (compact) -->
<div class="card bg-base-100 border border-base-300 text-sm">
  <div class="card-body p-3">
    <div class="flex items-center justify-between">
      <span class="opacity-70">Members</span>
      <span class="font-semibold">{{ member_count }}</span>
    </div>
    {% if not is_thread_member %}
    <div class="flex items-center justify-between">
      <span class="opacity-70">Organization</span>
      <span class="font-semibold text-xs">{{ thread.organization.name }}</span>
    </div>
    <div class="flex items-center justify-between">
      <span class="opacity-70">Type</span>
      <span class="font-semibold text-xs">{{ thread.get_thread_type_display }}</span>
    </div>
    {% else %}
    <div class="flex items-center justify-between">
      <span class="opacity-70">Online</span>
      <span class="font-semibold">â€”</span>
    </div>
    <div class="flex items-center justify-between">
      <span class="opacity-70">Posts</span>
      <span class="font-semibold">{{ thread.posts.count }}</span>
    </div>
    {% endif %}
  </div>
</div>

<div class="divider"></div>



<!-- Rules -->
<div class="mb-4">
  <h4 class="mb-2 font-semibold">Rules</h4>
  <ul class="text-base-content/70 list-inside list-disc space-y-1 text-sm">
    <li>Be respectful</li>
    <li>Stay on topic</li>
    <li>No spam</li>
  </ul>
</div>

<div class="divider"></div>

{% if is_thread_member %}
<!-- Admins -->
<div>
  <h4 class="mb-2 font-semibold">Admins</h4>
  <ul class="text-sm">
    {% for m in admin_memberships %}
      <li class="flex items-center gap-2">
        <div class="avatar">
          <div class="h-6 w-6 rounded-full">
            <img src="{% static 'images/thread.jpg' %}" alt="Admin" />
          </div>
        </div>
        <span>u/{{ m.user.username }}</span>
      </li>
    {% empty %}
      <li class="text-base-content/60">No admins.</li>
    {% endfor %}
  </ul>
</div>

<div class="divider"></div>

<!-- Moderators -->
<div>
  <h4 class="mb-2 font-semibold">Moderators</h4>
  <ul class="text-sm">
    {% for m in moderator_memberships %}
      <li class="flex items-center gap-2">
        <div class="avatar">
          <div class="h-6 w-6 rounded-full">
            <img src="{% static 'images/thread.jpg' %}" alt="Moderator" />
          </div>
        </div>
        <span>u/{{ m.user.username }}</span>
      </li>
    {% empty %}
      <li class="text-base-content/60">No moderators.</li>
    {% endfor %}
  </ul>
</div>
{% else %}
<!-- Organization Info for Non-Members -->
<div>
  <h4 class="mb-2 font-semibold">Organization</h4>
  <div class="card bg-base-200 border border-base-300">
    <div class="card-body p-3">
      <h5 class="font-medium text-sm">{{ thread.organization.name }}</h5>
      <p class="text-xs text-base-content/70 mt-1">{{ thread.organization.get_org_type_display }}</p>
      <div class="mt-2">
        <a href="{% url 'org-detail' slug=thread.organization.slug %}" class="btn btn-outline btn-xs">View Organization</a>
      </div>
    </div>
  </div>
</div>
{% endif %}
