<!-- prettier-ignore -->
{% extends 'base.html' %}

{% block title %}{{ view.object|yesno:"Edit Thread,Create Thread" }} - RuetConnect{% endblock %}

{% load static %}

{% block head %}
<style>
    /* Override the base template's main scroll restrictions for thread form page */
    main {
        overflow-y: auto !important;
        height: auto !important;
    }

    body {
        overflow: auto !important;
    }
</style>
{% endblock %}

{% block left_side_bar %}
{% endblock %}

{% block main %}
<!-- Complete override - no base template structure -->
<div class="w-full max-w-2xl mb-8">
    <div class="card bg-base-200 border-base-300 border shadow-xl">
        <div class="card-body">
            <div class="text-center mb-4">
                <div class="avatar mb-2">
                    <div class="w-16 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
                        <img src="{% static 'campus/RUET.png' %}" alt="RUET Logo" />
                    </div>
                </div>
                <h2 class="card-title text-xl font-bold text-primary justify-center">
                    {{ view.object|yesno:"Edit Thread,Create New Thread" }}
                </h2>
                <p class="text-base-content/70 mt-1">
                    {{ view.object|yesno:"Update your thread details,Start a new discussion in your organization" }}
                </p>
            </div>

            <div>
                {% include 'partials/form.html' with form=form submit_text=view.object|yesno:"Update Thread,Create Thread" %}
            </div>

            <div class="mt-6 text-center">
                {% if view.object %}
                    <a class="link link-secondary" href="{% url 'thread-detail' thread_name=view.object.slug %}">‚Üê Back to Thread</a>
                {% else %}
                    <a class="link link-secondary" href="{% url 'org-list' %}">‚Üê Back to Organizations</a>
                {% endif %}
            </div>

            {% if view.object %}
            <div class="mt-4 text-center text-xs text-base-content/50">
                <p>Thread created on {{ view.object.created_at|date:"F d, Y" }} by {{ view.object.created_by.get_full_name|default:view.object.created_by.username }}</p>
            </div>
            {% endif %}

            <div class="mt-4 text-center text-xs text-base-content/50">
                <p>üí° Choose a clear title and select the right category to help others find your thread</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block right_side_bar %}
{% endblock %}
